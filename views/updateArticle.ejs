<%- include('./partials/navbarDashboard.ejs')-%>
<link rel="stylesheet" href="/css/updateArticle.css">
<script src="https://cdn.ckeditor.com/ckeditor5/22.0.0/classic/ckeditor.js"></script>


<div class="container">
  <h1 class="titre">Page de Mise Ã  Jour</h1>
  <hr>
  <% articles.forEach(function(entry) {%>
  <div class="content">
    <div class="photo">
      <img src="<%=entry.image%>" class="card-img" alt="..." style="width:12em;" name="image">
    </div>
    <div class="text">
      <h1><%=entry.title%></h1>
      <p><%-entry.content%></p>
      <%});%>
    </div>
  </div>
</div>

<% articles.forEach(function(entry) {%>
<form action="/dashboard/updateArticle/<%=entry.postId%>?_method=PUT" method="POST" enctype="multipart/form-data">

  <div class="form-group row">
    <label for="colFormLabel" class="col-sm-2 col-form-label">titre</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="title" id="colFormLabel" placeholder="<%=entry.title%>">
    </div>
  </div>

  <div class="form-group row">
    <label for="colFormLabel" class="col-sm-2 col-form-label">description</label>
    <div class="col-sm-10">
      <textarea rows="5" class="form-control" name="description"><%=entry.description%></textarea>
    </div>
  </div>

  <div class="form-group row">
    <label for="colFormLabel" class="col-sm-2 col-form-label">article</label>
    <div class="col-sm-10">
      <textarea rows="5" class="form-control" id="blog" name="content"><%=entry.content%></textarea>
    </div>
  </div>


  <div class="form-group row">
    <label for="myfile" class="col-sm-2 col-form-label">Choisir une image de profile</label>
    <div class="col-sm-10">
      <input class="parc" type="file" name="image">
    </div>
  </div>

  <div class="form-group row">
    <label for="myfile" class="col-sm-2 col-form-label">Choisir une image d'arriere plan</label>
    <div class="col-sm-10">
      <input class="parc" type="file" name="backImage">
    </div>
  </div>

  <div class="modal-footer">
    <button type="submit" class="btn btn-primary">Valider les changements</button>
  </div>
  </div>
  </div>
  </div>
</form>
<%});%>

</div>
</div>

<script>
  ClassicEditor
    .create(document.querySelector('#blog'))
    .catch(error => {
      // console.error(error);
    });
</script>